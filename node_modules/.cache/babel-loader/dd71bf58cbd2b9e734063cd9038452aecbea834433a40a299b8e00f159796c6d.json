{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Yandex.Disk.localized/dev/diploma/movies-explorer-frontend/src/components/Register/Register.js\",\n  _s = $RefreshSig$();\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport \"./Register.css\";\nimport Form from \"../Form/Form\";\nimport logo from \"../../images/logo.svg\";\nimport CallbackValidation from \"../../utils/CallbackValidation\";\nimport MainApi from \"../../utils/MainApi\";\nimport useLogin from \"../../hooks/useLogin\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Register() {\n  _s();\n  const formCallbackValidation = CallbackValidation();\n  const {\n    login\n  } = useLogin();\n  const [error, setError] = useState(false);\n  const {\n    email,\n    password,\n    name\n  } = formCallbackValidation.values;\n  const {\n    values,\n    onFocus,\n    handleChange,\n    isFocused,\n    errors\n  } = formCallbackValidation;\n  const navigate = useNavigate();\n  async function handleRegister(name, email, password) {\n    try {\n      console.log('name', name);\n      console.log('email', email);\n      console.log('password', password);\n      await MainApi.register(name, email, password);\n      await login(email, password);\n      navigate(\"/signin\");\n    } catch (e) {\n      setError(e.message);\n      console.error(e);\n    }\n  }\n  const submitHandle = evt => {\n    evt.preventDefault();\n    handleRegister(name, email, password);\n    formCallbackValidation.resetForm();\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"register\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"register__container\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"register__logo\",\n          src: logo,\n          alt: \"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"register__title\",\n        children: \"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        submitText: {\n          buttonText: \"Зарегистрироваться\",\n          promt: \" Уже зарегистрированы?\",\n          route: \"/signin\",\n          linkText: \"Войти\"\n        },\n        registeredError: error,\n        validation: formCallbackValidation,\n        submitHandle: submitHandle,\n        formName: \"register\",\n        className: \"register__form\",\n        children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          className: \"register__fieldset\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"register__label\",\n            htmlFor: \"name\",\n            children: \"\\u0418\\u043C\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F\",\n            id: \"name\",\n            name: \"name\",\n            className: `form__input ${errors.name && \"form__input-invalid\"}`,\n            minLength: \"2\",\n            maxLength: \"30\",\n            value: values.name || \"\",\n            onFocus: onFocus,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"form__input-error\",\n            children: isFocused && errors.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"e2ZZWSE3PRy6jqBqBP4TluP0mGo=\", false, function () {\n  return [useLogin, useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["Link","useNavigate","useState","Form","logo","CallbackValidation","MainApi","useLogin","jsxDEV","_jsxDEV","Register","_s","formCallbackValidation","login","error","setError","email","password","name","values","onFocus","handleChange","isFocused","errors","navigate","handleRegister","console","log","register","e","message","submitHandle","evt","preventDefault","resetForm","className","children","to","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","submitText","buttonText","promt","route","linkText","registeredError","validation","formName","htmlFor","type","placeholder","id","minLength","maxLength","value","onChange","_c","$RefreshReg$"],"sources":["/Users/macbook/Yandex.Disk.localized/dev/diploma/movies-explorer-frontend/src/components/Register/Register.js"],"sourcesContent":["import { Link, useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport \"./Register.css\";\nimport Form from \"../Form/Form\";\nimport logo from \"../../images/logo.svg\";\nimport CallbackValidation from \"../../utils/CallbackValidation\";\nimport MainApi from \"../../utils/MainApi\";\nimport useLogin from \"../../hooks/useLogin\";\n\nfunction Register() {\n  const formCallbackValidation = CallbackValidation();\n  const { login } = useLogin();\n  const [error, setError] = useState(false);\n  const { email, password, name } = formCallbackValidation.values;\n  const { values, onFocus, handleChange, isFocused, errors } =\n    formCallbackValidation;\n\n  const navigate = useNavigate();\n\n  async function handleRegister(name, email, password) {\n    try {\n      console.log('name', name);\n      console.log('email', email);\n      console.log('password', password);\n      await MainApi.register(name, email, password);\n      await login(email, password);\n      navigate(\"/signin\");\n    }\n    catch (e) {\n      setError(e.message);\n      console.error(e);\n    }\n  }\n\n  const submitHandle = (evt) => {\n    evt.preventDefault();\n    handleRegister(name, email, password);\n    formCallbackValidation.resetForm();\n  };\n\n  return (\n    <section className=\"register\">\n      <div className=\"register__container\">\n        <Link to=\"/\">\n          <img className=\"register__logo\" src={logo} alt=\"Логотип\" />\n        </Link>\n        <h1 className=\"register__title\">Добро пожаловать!</h1>\n        <Form\n          submitText={{\n            buttonText: \"Зарегистрироваться\",\n            promt: \" Уже зарегистрированы?\",\n            route: \"/signin\",\n            linkText: \"Войти\",\n          }}\n          registeredError={error}\n          validation={formCallbackValidation}\n          submitHandle={submitHandle}\n          formName=\"register\"\n          className=\"register__form\"\n        >\n          <fieldset className=\"register__fieldset\">\n            <label className=\"register__label\" htmlFor=\"name\">\n              Имя\n            </label>\n            <input\n              type=\"text\"\n              placeholder=\"Введите имя\"\n              id=\"name\"\n              name=\"name\"\n              className={`form__input ${errors.name && \"form__input-invalid\"}`}\n              minLength=\"2\"\n              maxLength=\"30\"\n              value={values.name || \"\"}\n              onFocus={onFocus}\n              onChange={handleChange}\n            />\n            <span className=\"form__input-error\">\n              {isFocused && errors.name}\n            </span>\n          </fieldset>\n        </Form>\n      </div>\n    </section>\n  );\n}\n\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}